<%- include ('./partials/header.ejs') %>
<script
  src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
  data-auto-replace-svg="nest"
></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

<style>
  body {
    background-color: white;
    max-width: 100%;
    overflow-x: hidden;
  }
  #card {
    width: 220px;
    height: 130px;
    overflow-y: hidden;
    border: 0.1px solid rgb(243, 243, 243);
    border-top-left-radius: 20px;
    box-shadow: 5px 5px 5px lightgrey;
  }
  .cardstyle {
    flex-direction: row;
    margin-right: -150px;
    margin-bottom: 50px;
  }
  .firstContainer {
    position: relative;
    left: 250px;
    width: "100%";
  }
  #graphCard {
    width: 18rem;
    margin-right: 70px;
    border: 0.1px solid rgb(243, 243, 243);
    border-top-left-radius: 20px;
    box-shadow: 5px 5px 5px lightgrey;
    height: 400px;
    width: 400px;
  }
  #usersCard {
    width: 18rem;
    margin-top: 40px;
    height: 500px;
    width: 680px;
    margin-right: 40px;
    border: 0.1px solid rgb(243, 243, 243);
    border-top-left-radius: 20px;
    box-shadow: 5px 5px 5px lightgrey;
  }
</style>

<div class="firstContainer">
  <div class="row">
    <%for(var i=0; i< 5; i++){%>
    <div class="col-sm-3 cardstyle">
      <div class="card" id="card">
        <div class="card-body">
          <h6 class="card-title">Special</h6>
          <h5 class="card-text">5525</h5>
          <h7 style="color: gray; position: relative; bottom: 20"
            >Last: 30.4k</h7
          >
          <span style="color: grey">
            <i
              class="fab fa-accusoft fa-3x"
              style="position: relative; left: 30px; bottom: 50px"
            ></i
          ></span>
        </div>
      </div>
    </div>
    <%}%>
  </div>
  <div class="row">
    <div class="card" id="graphCard">
      <div class="card-body">
        <canvas id="myChart1" style="width: 100%; height: 100%"></canvas>
      </div>
    </div>

    <div class="card" id="graphCard">
      <div class="card-body">
        <canvas id="myChart2" style="width: 100%; height: 100%"></canvas>
      </div>
    </div>

    <div class="card" id="graphCard">
      <div class="card-body">
        <canvas
          id="myChart3"
          style="width: 100%; height: 100%; position: relative; bottom: 20px"
        ></canvas>
      </div>
    </div>
  </div>
  <div class="row">
    <%for(var i=0; i< 2; i++){%>
    <div class="card" id="usersCard">
      <div class="card-body">
        <label>Users/Movies</label>
        <table class="table">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Mandle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
            <tr>
              <th scope="row">2</th>
              <td>Jacob</td>
              <td>Thornton</td>
              <td>@fat</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>Larry</td>
              <td>the Bird</td>
              <td>@twitter</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <%}%>
  </div>
</div>

<script>
  var xValues = [];
  var yValues = [];
  const response = fetch("http://localhost:3027/crm/crm/dashboard/data");
  response
    .then((data) => {
      return data.json();
    })
    .then((list) => {
      // console.log(list[0].title);
      for (var i = 0; i < list.length; i++) {
        xValues.push(list[i].title);
      }
    });

  // var xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
  console.log(xValues);
  var yValues = [55, 49, 44, 24, 15];
  var barColors = ["red", "green", "dodgerblue", "orange", "brown"];

  new Chart("myChart1", {
    type: "bar",
    data: {
      labels: xValues,
      datasets: [
        {
          backgroundColor: barColors,
          data: yValues,
        },
      ],
    },
  });
  new Chart("myChart2", {
    type: "pie",
    data: {
      labels: xValues,
      datasets: [
        {
          backgroundColor: barColors,
          data: yValues,
        },
      ],
    },
    option: {
      title: {
        display: true,
        text: "BarColor Data",
      },
    },
  });
  new Chart("myChart3", {
    type: "doughnut",
    data: {
      labels: xValues,
      datasets: [
        {
          backgroundColor: barColors,
          data: yValues,
        },
      ],
    },
    option: {
      title: {
        display: true,
        text: "BarColor Data",
      },
    },
  });
</script>
<%- include ('./partials/footer.ejs') %>
